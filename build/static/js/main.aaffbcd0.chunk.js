(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{55:function(e,t,n){},56:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var c=n(10),s=n.n(c),a=(n(55),n(25)),r=n(31),i=n(1),o=n.n(i),l=n(20),d=Object(i.createContext)({restaurantName:null,category:[],dishes:[],itemCount:0,setItemCount:function(e){},setRestname:function(e){},setCategory:function(e){},setDishes:function(e){}}),u=n(11),j=function(){var e=Object(i.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)(),o=Object(u.a)(s,2),l=o[0],d=o[1],j=Object(i.useRef)([]),h=Object(i.useCallback)(function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n,s,r,i,o,l,u=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",s=u.length>2&&void 0!==u[2]?u[2]:null,r=u.length>3&&void 0!==u[3]?u[3]:{},c(!0),console.log("testing",s),i=new AbortController,j.current.push(i),e.prev=7,e.next=10,fetch(t,{method:n,body:s,headers:r,signal:i.signal});case 10:return o=e.sent,e.next=13,o.json();case 13:if(l=e.sent,j.current=j.current.filter((function(e){return e!==i})),o.ok){e.next=17;break}throw new Error(l.message);case 17:return c(!1),e.abrupt("return",l);case 21:throw e.prev=21,e.t0=e.catch(7),d(e.t0.message),c(!1),e.t0;case 26:case"end":return e.stop()}}),e,null,[[7,21]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(i.useEffect)((function(){return function(){j.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:l,sendRequest:h,clearError:function(){d(null)}}},h=n(19),b=(n(56),n(2)),O=function(e){return Object(b.jsx)("li",{children:Object(b.jsx)(h.c,{to:"/dishes/".concat(e.categoryId),exact:!0,children:e.title})})},m=(n(66),function(e){return Object(b.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(b.jsx)("div",{className:"lds-dual-ring"})})}),x=n(41),f=n(98),g=(n(67),function(e){return s.a.createPortal(Object(b.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),v=(n(68),function(e){var t=Object(b.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(b.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(b.jsx)("h2",{children:e.header})}),Object(b.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(b.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(b.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return s.a.createPortal(t,document.getElementById("modal-hook"))}),C=function(e){return Object(b.jsxs)(o.a.Fragment,{children:[e.show&&Object(b.jsx)(g,{onClick:e.onCancel}),Object(b.jsx)(f.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(b.jsx)(v,Object(x.a)({},e))})]})},y=(n(69),function(e){return e.href?Object(b.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(b.jsx)(h.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(b.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}),p=function(e){return Object(b.jsx)(C,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(b.jsx)(y,{onClick:e.onClear,children:"Okay"}),children:Object(b.jsx)("p",{children:e.error})})},N=(n(70),function(e){var t=Object(l.g)(),n=Object(i.useContext)(d),c=j(),s=c.isLoading,u=c.error,h=c.sendRequest,x=c.clearError;return console.log(n.category,"main navigation",n.category.length>0,!s),Object(i.useEffect)((function(){var e=function(){var e=Object(r.a)(Object(a.a)().mark((function e(){var c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("https://run.mocky.io/v3/a67edc87-49c7-4822-9cb4-e2ef94cb3099");case 3:c=e.sent,console.log(c),n.setRestname(c[0]),n.setCategory(c[0]),n.setDishes(c[0]),t.push("/dishes/11"),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[h]),Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsx)(p,{error:u,onClear:x}),s&&Object(b.jsxs)("div",{className:"center",children:["  ",Object(b.jsx)(m,{})," "]}),Object(b.jsx)("nav",{className:"main-navigation__header-nav",children:Object(b.jsx)("ul",{className:"nav-links",children:!s&&n.category.length>0&&n.category.map((function(e){return Object(b.jsx)(O,{title:e.category,categoryId:e.catId},e.catId)}))})})]})}),_=n(97),k=n(42),I=n.n(k),w=function(e){var t=Object(i.useContext)(d);return console.log(t.itemCount,"icon"),Object(b.jsx)("div",{children:Object(b.jsxs)(_.a,{color:"secondary",badgeContent:"".concat(t.itemCount),children:[Object(b.jsx)(I.a,{})," "]})})},E=n(43),S=(n(72),function(){var e=Object(i.useContext)(d);return console.log("working"),Object(b.jsxs)("div",{className:"title",children:[Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"arrow-btn",children:Object(b.jsx)(E.a,{color:"black",size:"20px",style:{background:"white"}})})}),Object(b.jsx)("h2",{children:e.restaurantName?e.restaurantName:"unknown"}),Object(b.jsx)("h3",{children:"My orders"}),Object(b.jsx)(w,{})]})}),R=(n(73),function(e){return Object(b.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}),D=n(99),z=n(45),A=n.n(z),P=n(44),q=n.n(P),F=(n(74),function(e){var t=Object(i.useContext)(d);return Object(b.jsxs)(D.a,{children:[Object(b.jsxs)("button",{className:"remove",onClick:function(){e.onChange(Math.max(e.count-1,0)),t.setItemCount(Math.max(t.itemCount-1,0))},children:[" ",Object(b.jsx)(q.a,{fontSize:"small"})]}),Object(b.jsx)("span",{className:"count",children:e.count}),Object(b.jsxs)("button",{className:"add",onClick:function(){e.onChange(e.count+1),t.setItemCount(t.itemCount+1)},children:[" ",Object(b.jsx)(A.a,{fontSize:"small"})]})]})}),L=n(46),M=(n(77),function(e){var t=j(),n=t.isLoading,c=t.error,s=(t.sendRequest,t.clearError),a=Object(i.useState)(0),r=Object(u.a)(a,2),l=r[0],d=r[1];return Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsx)(p,{error:c,onClear:s}),Object(b.jsx)("li",{className:"dish-item",children:Object(b.jsxs)(R,{className:"dish-item__content",children:[n&&Object(b.jsx)(m,{asOverlay:!0}),Object(b.jsx)("div",{className:"dish-icon",children:Object(b.jsx)(L.a,{color:"".concat(e.availability?"green":"red")})}),Object(b.jsxs)("div",{className:"dish-item__info",children:[Object(b.jsx)("h2",{children:e.title}),Object(b.jsx)("h3",{children:"".concat(e.currency," ").concat(e.price)}),Object(b.jsx)("p",{children:e.description}),e.availability&&Object(b.jsx)(F,{count:l,onChange:function(e){return function(e){d(e)}(e)}}),e.addonCat&&Object(b.jsx)("p",{className:"red",children:"customirization available"}),!e.availability&&Object(b.jsx)("p",{className:"red",children:"Not available"})]}),Object(b.jsx)("div",{className:"dish-cal",children:Object(b.jsx)("p",{children:"".concat(e.calorie," calories")})}),Object(b.jsx)("div",{className:"dish-item__image",children:Object(b.jsx)("img",{src:e.image,alt:e.title})})]})})]})}),B=(n(78),function(e){return 0===e.items.length?Object(b.jsx)("div",{className:"place-list center",children:Object(b.jsxs)(R,{children:[Object(b.jsx)("h2",{children:"No places found. Maybe create one?"}),Object(b.jsx)(y,{to:"/places/new",children:"Share Place"})]})}):Object(b.jsx)("ul",{className:"dish-list",children:e.items.map((function(e){return Object(b.jsx)(M,{id:e.sidshId,image:e.dishImage,title:e.dishName,description:e.dishDescription,price:e.dishPrice,calorie:e.dishCalorie,currency:e.dishCurrency,availability:e.dishAvailability,addonCat:e.dishAddonCat},e.dishId)}))})}),J=function(e,t){var n=[];return console.log(t,"action"),console.log(e,"catDishes"),t.dishes.length>0&&(n=t.dishes.filter((function(e){return e.catId==t.categoryId}))),console.log(n,"result"),n},G=function(){var e=Object(i.useContext)(d),t=e.dishes.length>0?e.dishes:[];console.log("dish",t);var n=Object(i.useReducer)(J,[]),c=Object(u.a)(n,2),s=c[0],a=c[1];console.log("dish2",s);var r=j(),h=r.isLoading,O=r.error,x=(r.sendRequest,r.clearError),f=Object(l.h)().categoryId;return Object(i.useEffect)((function(){console.log("dispatching",e.dishes),a({categoryId:f,dishes:e.dishes})}),[f,e]),Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsx)(p,{error:O,onClear:x}),h&&Object(b.jsx)("div",{className:"center",children:Object(b.jsx)(m,{})}),!h&&s.length>0&&Object(b.jsx)(B,{items:s})]})};n(79);var T=function(){var e=function(){var e=Object(i.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)([]),a=Object(u.a)(s,2),r=a[0],o=a[1],l=Object(i.useState)([]),d=Object(u.a)(l,2),j=d[0],h=d[1],b=Object(i.useState)(0),O=Object(u.a)(b,2),m=O[0],x=O[1],f=Object(i.useCallback)((function(e){x(e)}),[]);return{restaurantName:n,category:r,dishes:j,itemCount:m,setRestname:Object(i.useCallback)((function(e){c(e.restaurant_name)}),[]),setCategory:Object(i.useCallback)((function(e){console.log("seting cat");var t=e.table_menu_list.map((function(e){return{catId:e.menu_category_id,category:e.menu_category}}));console.log(t),o(t)}),[]),setDishes:Object(i.useCallback)((function(e){console.log("setting dish");var t=[];e.table_menu_list.forEach((function(e){e.category_dishes.forEach((function(n){t.push({catId:e.menu_category_id,category:e.menu_category,dishId:n.dish_id,dishName:n.dish_name,dishPrice:n.dish_price,dishCurrency:n.dish_currency,dishImage:n.dish_image,dishCalorie:n.dish_calories,dishDescription:n.dish_description,dishAvailability:n.dish_Availability,dishAddonCat:n.addonCat.length>0})}))})),console.log(t),h(t)}),[]),setItemCount:f}}(),t=e.restaurantName,n=e.category,c=e.dishes,s=e.itemCount,a=e.setRestname,r=e.setCategory,o=e.setDishes,j=e.setItemCount,O=Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{path:"/",exact:!0,children:Object(b.jsx)(G,{})}),Object(b.jsx)(l.b,{path:"/dishes/:categoryId",exact:!0,children:Object(b.jsx)(G,{})}),Object(b.jsx)(l.a,{to:"/"})]});return Object(b.jsx)(d.Provider,{value:{restaurantName:t,category:n,dishes:c,setRestname:a,setCategory:r,setDishes:o,setItemCount:j,itemCount:s},children:Object(b.jsxs)(h.a,{children:[Object(b.jsx)(S,{}),Object(b.jsx)(N,{}),Object(b.jsx)("main",{children:O})]})})};s.a.render(Object(b.jsx)(T,{}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.aaffbcd0.chunk.js.map