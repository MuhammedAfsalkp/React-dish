{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\INFOSYS\\\\Desktop\\\\Dish-front-end\\\\src\\\\dishes\\\\pages\\\\Dishes.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useReducer, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport DishList from '../components/DishList';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport { DishContext } from '../../shared/context/dish-context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst reducer = (catDishes, action) => {\n  let res = [];\n\n  if (catDishes.lenght > 0) {\n    res = catDishes.filter(el => {\n      return el.catId == action.categoryId;\n    });\n  }\n\n  return res;\n};\n\nconst Dishes = () => {\n  _s();\n\n  const dish = useContext(DishContext);\n  let initialDish = dish.dishes.length > 0 ? dish.dishes : [];\n  console.log(\"dish\", initialDish); // const [loadedDishes, setLoadedDishes] = useState(initialDish);\n\n  const [catDishes, dispatch] = useReducer(reducer, initialDish);\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const categoryId = useParams().menu_category_id; // useEffect(() => {\n  //   const fetchDishes = async () => {\n  //     try {\n  //       const responseData = await sendRequest(\n  //         `https://run.mocky.io/v3/a67edc87-49c7-4822-9cb4-e2ef94cb3099`\n  //       );\n  //       dish.setRestname(responseData[0])\n  //       dish.setCategory(responseData[0]);\n  //       dish.setDishes(responseData[0]);\n  //     } catch (err) {}\n  //   };\n  //   fetchDishes();\n  // }, [sendRequest]);\n\n  useEffect(() => {\n    dispatch({\n      categoryId\n    });\n  }, [categoryId]);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ErrorModal, {\n      error: error,\n      onClear: clearError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center\",\n      children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), !isLoading && catDishes.length > 0 && /*#__PURE__*/_jsxDEV(DishList, {\n      items: catDishes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Dishes, \"uW9GGCpehG37n5WqgSuW5Due3tM=\", false, function () {\n  return [useHttpClient, useParams];\n});\n\n_c = Dishes;\nexport default Dishes;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dishes\");","map":{"version":3,"names":["React","useEffect","useState","useReducer","useContext","useParams","DishList","ErrorModal","LoadingSpinner","useHttpClient","DishContext","reducer","catDishes","action","res","lenght","filter","el","catId","categoryId","Dishes","dish","initialDish","dishes","length","console","log","dispatch","isLoading","error","sendRequest","clearError","menu_category_id"],"sources":["C:/Users/INFOSYS/Desktop/Dish-front-end/src/dishes/pages/Dishes.js"],"sourcesContent":["import React, { useEffect, useState,useReducer,useContext } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport DishList from '../components/DishList';\r\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\r\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\r\nimport { useHttpClient } from '../../shared/hooks/http-hook';\r\nimport { DishContext } from '../../shared/context/dish-context';\r\n\r\nconst reducer = (catDishes,action) =>{\r\n  let res=[];\r\n  if(catDishes.lenght>0){\r\n\r\n    res=catDishes.filter(el =>{\r\n       return el.catId ==action.categoryId;\r\n    })\r\n  }\r\n  return res;\r\n  \r\n\r\n}\r\n\r\nconst Dishes = () => {\r\n  const dish = useContext(DishContext)\r\n  let initialDish=dish.dishes.length>0 ? dish.dishes : []\r\n  console.log(\"dish\",initialDish)\r\n  // const [loadedDishes, setLoadedDishes] = useState(initialDish);\r\n  const [catDishes,dispatch]=useReducer(reducer,initialDish)\r\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\r\n\r\n  const categoryId = useParams().menu_category_id;\r\n\r\n  // useEffect(() => {\r\n  //   const fetchDishes = async () => {\r\n  //     try {\r\n  //       const responseData = await sendRequest(\r\n  //         `https://run.mocky.io/v3/a67edc87-49c7-4822-9cb4-e2ef94cb3099`\r\n  //       );\r\n  //       dish.setRestname(responseData[0])\r\n  //       dish.setCategory(responseData[0]);\r\n  //       dish.setDishes(responseData[0]);\r\n  //     } catch (err) {}\r\n  //   };\r\n  //   fetchDishes();\r\n  // }, [sendRequest]);\r\n\r\n  useEffect(()=>{\r\n    dispatch({categoryId})\r\n\r\n  },[categoryId])\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      {isLoading && (\r\n        <div className=\"center\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      )}\r\n      {!isLoading && catDishes.length>0  && (\r\n        <DishList items={catDishes}/>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Dishes;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAoCC,UAApC,EAA+CC,UAA/C,QAAiE,OAAjE;AACA,SAASC,SAAT,QAA0B,kBAA1B;AAEA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,UAAP,MAAuB,+CAAvB;AACA,OAAOC,cAAP,MAA2B,mDAA3B;AACA,SAASC,aAAT,QAA8B,8BAA9B;AACA,SAASC,WAAT,QAA4B,mCAA5B;;;AAEA,MAAMC,OAAO,GAAG,CAACC,SAAD,EAAWC,MAAX,KAAqB;EACnC,IAAIC,GAAG,GAAC,EAAR;;EACA,IAAGF,SAAS,CAACG,MAAV,GAAiB,CAApB,EAAsB;IAEpBD,GAAG,GAACF,SAAS,CAACI,MAAV,CAAiBC,EAAE,IAAG;MACvB,OAAOA,EAAE,CAACC,KAAH,IAAWL,MAAM,CAACM,UAAzB;IACF,CAFG,CAAJ;EAGD;;EACD,OAAOL,GAAP;AAGD,CAXD;;AAaA,MAAMM,MAAM,GAAG,MAAM;EAAA;;EACnB,MAAMC,IAAI,GAAGjB,UAAU,CAACM,WAAD,CAAvB;EACA,IAAIY,WAAW,GAACD,IAAI,CAACE,MAAL,CAAYC,MAAZ,GAAmB,CAAnB,GAAuBH,IAAI,CAACE,MAA5B,GAAqC,EAArD;EACAE,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBJ,WAAnB,EAHmB,CAInB;;EACA,MAAM,CAACV,SAAD,EAAWe,QAAX,IAAqBxB,UAAU,CAACQ,OAAD,EAASW,WAAT,CAArC;EACA,MAAM;IAAEM,SAAF;IAAaC,KAAb;IAAoBC,WAApB;IAAiCC;EAAjC,IAAgDtB,aAAa,EAAnE;EAEA,MAAMU,UAAU,GAAGd,SAAS,GAAG2B,gBAA/B,CARmB,CAUnB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA/B,SAAS,CAAC,MAAI;IACZ0B,QAAQ,CAAC;MAACR;IAAD,CAAD,CAAR;EAED,CAHQ,EAGP,CAACA,UAAD,CAHO,CAAT;EAOA,oBACE,QAAC,KAAD,CAAO,QAAP;IAAA,wBACE,QAAC,UAAD;MAAY,KAAK,EAAEU,KAAnB;MAA0B,OAAO,EAAEE;IAAnC;MAAA;MAAA;MAAA;IAAA,QADF,EAEGH,SAAS,iBACR;MAAK,SAAS,EAAC,QAAf;MAAA,uBACE,QAAC,cAAD;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QAHJ,EAOG,CAACA,SAAD,IAAchB,SAAS,CAACY,MAAV,GAAiB,CAA/B,iBACC,QAAC,QAAD;MAAU,KAAK,EAAEZ;IAAjB;MAAA;MAAA;MAAA;IAAA,QARJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAaD,CA5CD;;GAAMQ,M;UAMkDX,a,EAEnCJ,S;;;KARfe,M;AA8CN,eAAeA,MAAf"},"metadata":{},"sourceType":"module"}