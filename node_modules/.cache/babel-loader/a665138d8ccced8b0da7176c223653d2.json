{"ast":null,"code":"import _slicedToArray from\"C:/Users/INFOSYS/Desktop/Dish-front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useReducer,useContext}from'react';import{useParams}from'react-router-dom';import DishList from'../components/DishList';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import{useHttpClient}from'../../shared/hooks/http-hook';import{DishContext}from'../../shared/context/dish-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(catDishes,action){var res=[];console.log(action,\"action\");console.log(catDishes,\"catDishes\");if(action.dishes.length>0){res=action.dishes.filter(function(el){return el.catId==action.categoryId;});}console.log(res,\"result\");return res;};var Dishes=function Dishes(){var dish=useContext(DishContext);var initialDish=dish.dishes.length>0?dish.dishes:[];console.log(\"dish\",initialDish);// const [loadedDishes, setLoadedDishes] = useState(initialDish);\nvar _useReducer=useReducer(reducer,[]),_useReducer2=_slicedToArray(_useReducer,2),catDishes=_useReducer2[0],dispatch=_useReducer2[1];console.log(\"dish2\",catDishes);var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var categoryId=useParams().categoryId;// useEffect(() => {\n//   const fetchDishes = async () => {\n//     try {\n//       const responseData = await sendRequest(\n//         `https://run.mocky.io/v3/a67edc87-49c7-4822-9cb4-e2ef94cb3099`\n//       );\n//       dish.setRestname(responseData[0])\n//       dish.setCategory(responseData[0]);\n//       dish.setDishes(responseData[0]);\n//     } catch (err) {}\n//   };\n//   fetchDishes();\n// }, [sendRequest]);\nuseEffect(function(){console.log(\"dispatching\",dish.dishes);dispatch({categoryId:categoryId,dishes:dish.dishes});},[categoryId,dish]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})}),!isLoading&&catDishes.length>0&&/*#__PURE__*/_jsx(DishList,{items:catDishes})]});};export default Dishes;","map":{"version":3,"names":["React","useEffect","useState","useReducer","useContext","useParams","DishList","ErrorModal","LoadingSpinner","useHttpClient","DishContext","reducer","catDishes","action","res","console","log","dishes","length","filter","el","catId","categoryId","Dishes","dish","initialDish","dispatch","isLoading","error","sendRequest","clearError"],"sources":["C:/Users/INFOSYS/Desktop/Dish-front-end/src/dishes/pages/Dishes.js"],"sourcesContent":["import React, { useEffect, useState,useReducer,useContext } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport DishList from '../components/DishList';\r\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\r\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\r\nimport { useHttpClient } from '../../shared/hooks/http-hook';\r\nimport { DishContext } from '../../shared/context/dish-context';\r\n\r\nconst reducer = (catDishes,action) =>{\r\n  let res=[];\r\n  console.log(action,\"action\")\r\n  console.log(catDishes,\"catDishes\")\r\n  if(action.dishes.length >0){\r\n\r\n    res=action.dishes.filter(el =>{\r\n       return el.catId ==action.categoryId;\r\n    })\r\n  }\r\n  console.log(res,\"result\")\r\n  return res;\r\n  \r\n\r\n}\r\n\r\nconst Dishes = () => {\r\n  const dish = useContext(DishContext)\r\n  let initialDish=dish.dishes.length>0 ? dish.dishes : []\r\n  console.log(\"dish\",initialDish)\r\n  // const [loadedDishes, setLoadedDishes] = useState(initialDish);\r\n  const [catDishes,dispatch]=useReducer(reducer,[])\r\n  console.log(\"dish2\",catDishes)\r\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\r\n\r\n  const categoryId = useParams().categoryId;\r\n\r\n  // useEffect(() => {\r\n  //   const fetchDishes = async () => {\r\n  //     try {\r\n  //       const responseData = await sendRequest(\r\n  //         `https://run.mocky.io/v3/a67edc87-49c7-4822-9cb4-e2ef94cb3099`\r\n  //       );\r\n  //       dish.setRestname(responseData[0])\r\n  //       dish.setCategory(responseData[0]);\r\n  //       dish.setDishes(responseData[0]);\r\n  //     } catch (err) {}\r\n  //   };\r\n  //   fetchDishes();\r\n  // }, [sendRequest]);\r\n\r\n  useEffect(()=>{\r\n    console.log(\"dispatching\",dish.dishes)\r\n    dispatch({categoryId,dishes:dish.dishes})\r\n\r\n  },[categoryId,dish])\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      {isLoading && (\r\n        <div className=\"center\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      )}\r\n      {!isLoading && catDishes.length>0  && (\r\n        <DishList items={catDishes}/>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Dishes;"],"mappings":"6HAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAoCC,UAApC,CAA+CC,UAA/C,KAAiE,OAAjE,CACA,OAASC,SAAT,KAA0B,kBAA1B,CAEA,MAAOC,SAAP,KAAqB,wBAArB,CACA,MAAOC,WAAP,KAAuB,+CAAvB,CACA,MAAOC,eAAP,KAA2B,mDAA3B,CACA,OAASC,aAAT,KAA8B,8BAA9B,CACA,OAASC,WAAT,KAA4B,mCAA5B,C,wFAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,CAACC,SAAD,CAAWC,MAAX,CAAqB,CACnC,GAAIC,IAAG,CAAC,EAAR,CACAC,OAAO,CAACC,GAAR,CAAYH,MAAZ,CAAmB,QAAnB,EACAE,OAAO,CAACC,GAAR,CAAYJ,SAAZ,CAAsB,WAAtB,EACA,GAAGC,MAAM,CAACI,MAAP,CAAcC,MAAd,CAAsB,CAAzB,CAA2B,CAEzBJ,GAAG,CAACD,MAAM,CAACI,MAAP,CAAcE,MAAd,CAAqB,SAAAC,EAAE,CAAG,CAC3B,MAAOA,GAAE,CAACC,KAAH,EAAWR,MAAM,CAACS,UAAzB,CACF,CAFG,CAAJ,CAGD,CACDP,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAgB,QAAhB,EACA,MAAOA,IAAP,CAGD,CAdD,CAgBA,GAAMS,OAAM,CAAG,QAATA,OAAS,EAAM,CACnB,GAAMC,KAAI,CAAGpB,UAAU,CAACM,WAAD,CAAvB,CACA,GAAIe,YAAW,CAACD,IAAI,CAACP,MAAL,CAAYC,MAAZ,CAAmB,CAAnB,CAAuBM,IAAI,CAACP,MAA5B,CAAqC,EAArD,CACAF,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAmBS,WAAnB,EACA;AACA,gBAA2BtB,UAAU,CAACQ,OAAD,CAAS,EAAT,CAArC,4CAAOC,SAAP,iBAAiBc,QAAjB,iBACAX,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAoBJ,SAApB,EACA,mBAAsDH,aAAa,EAAnE,CAAQkB,SAAR,gBAAQA,SAAR,CAAmBC,KAAnB,gBAAmBA,KAAnB,CAA0BC,WAA1B,gBAA0BA,WAA1B,CAAuCC,UAAvC,gBAAuCA,UAAvC,CAEA,GAAMR,WAAU,CAAGjB,SAAS,GAAGiB,UAA/B,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEArB,SAAS,CAAC,UAAI,CACZc,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA0BQ,IAAI,CAACP,MAA/B,EACAS,QAAQ,CAAC,CAACJ,UAAU,CAAVA,UAAD,CAAYL,MAAM,CAACO,IAAI,CAACP,MAAxB,CAAD,CAAR,CAED,CAJQ,CAIP,CAACK,UAAD,CAAYE,IAAZ,CAJO,CAAT,CAQA,mBACE,MAAC,KAAD,CAAO,QAAP,yBACE,KAAC,UAAD,EAAY,KAAK,CAAEI,KAAnB,CAA0B,OAAO,CAAEE,UAAnC,EADF,CAEGH,SAAS,eACR,YAAK,SAAS,CAAC,QAAf,uBACE,KAAC,cAAD,IADF,EAHJ,CAOG,CAACA,SAAD,EAAcf,SAAS,CAACM,MAAV,CAAiB,CAA/B,eACC,KAAC,QAAD,EAAU,KAAK,CAAEN,SAAjB,EARJ,GADF,CAaD,CA9CD,CAgDA,cAAeW,OAAf"},"metadata":{},"sourceType":"module"}